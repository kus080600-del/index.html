<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>365å¤©å¹¸é‹éš¨æ©Ÿè¨ˆç•« (æ‰‹æ©Ÿå„ªåŒ–ç‰ˆ)</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --soft-blue: #e3f2fd;
            --main-blue: #90caf9;
            --deep-blue: #1e88e5;
            --lucky-gold: #ffd700;
            --bg: #f0f7ff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Microsoft JhengHei", sans-serif;
            background: var(--bg);
            margin: 0;
            padding: 0;
            color: #445;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤æ‰‹æ©Ÿé»æ“Šè—è‰²é™°å½± */
        }

        /* å›ºå®šåœ¨é ‚éƒ¨çš„çµ±è¨ˆè³‡è¨Š */
        .header-sticky {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 10;
            padding: 15px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        .header-sticky h1 { margin: 0 0 10px 0; font-size: 1.4em; color: var(--deep-blue); }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .stat-box {
            background: var(--soft-blue);
            padding: 8px 5px;
            border-radius: 12px;
            text-align: center;
        }
        .stat-box small { display: block; color: #789; font-size: 0.7em; }
        .stat-box span { font-size: 1em; font-weight: bold; color: var(--deep-blue); }

        /* æ–‡æ¡ˆå€ */
        #quote-display {
            background: #fff;
            margin: 15px;
            padding: 15px;
            border-radius: 15px;
            font-size: 0.95em;
            color: #567;
            line-height: 1.5;
            border: 1px solid var(--soft-blue);
            box-shadow: 0 4px 10px rgba(0,0,0,0.02);
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* ç¶²æ ¼å€ */
        .grid-container {
            padding: 0 15px 100px 15px; /* åº•éƒ¨ç•™ç™½é¿å…é®æ“‹ */
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* æ‰‹æ©Ÿç‰ˆé è¨­ 4 åˆ— */
            gap: 10px;
        }

        /* å¹³æ¿æˆ–æ¡Œé¢æ”¹ç‚º 6-8 åˆ— */
        @media (min-width: 600px) {
            .grid { grid-template-columns: repeat(6, 1fr); }
        }
        @media (min-width: 900px) {
            .grid { grid-template-columns: repeat(10, 1fr); }
        }

        .cell {
            background: white;
            border: 1.5px solid var(--soft-blue);
            border-radius: 15px;
            padding: 12px 2px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.2s active;
        }

        /* æ‰‹æ©Ÿé»æ“Šæ•ˆæœ */
        .cell:active {
            transform: scale(0.9);
            background: var(--soft-blue);
        }

        .cell .day-num { font-size: 0.6em; color: #abb; margin-bottom: 2px; }
        .cell .amount { font-size: 0.9em; font-weight: bold; color: var(--deep-blue); }

        .cell.checked {
            background: var(--deep-blue);
            border-color: var(--deep-blue);
            color: white;
        }
        .cell.checked .day-num, .cell.checked .amount { color: white; }

        /* å½ˆçª—å„ªåŒ– */
        #modal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 50px rgba(0,0,0,0.3);
            z-index: 100; text-align: center; width: 80%; max-width: 300px;
        }
        #modal h2 { color: var(--lucky-gold); margin-top: 0; font-size: 1.2em; }
        #modal button { background: var(--deep-blue); color: white; border: none; padding: 12px 30px; border-radius: 12px; margin-top: 15px; width: 100%; font-size: 1em; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 99; }

        .reset-btn { margin: 20px auto; display: block; border: none; background: none; color: #bbb; font-size: 0.8em; }
    </style>
</head>
<body>

<div class="overlay" id="overlay"></div>
<div id="modal">
    <h2 id="milestone-title">ğŸŒŸ é”æˆé‡Œç¨‹ç¢‘ï¼</h2>
    <p id="milestone-msg"></p>
    <button onclick="closeModal()">æ”¶ä¸‹å¥½é‹</button>
</div>

<div class="header-sticky">
    <h1>ğŸ’ 365å¤©å¹¸é‹æŒ‘æˆ°</h1>
    <div class="stats">
        <div class="stat-box"><small>ç´¯ç©é‡‘é¡</small><span id="total-money">$ 0</span></div>
        <div class="stat-box"><small>å·²å­˜å¤©æ•¸</small><span id="total-days">0</span></div>
        <div class="stat-box"><small>é€²åº¦</small><span id="percent">0%</span></div>
    </div>
</div>

<div id="quote-display">é»æ“Šæ ¼å­é–‹å•Ÿä»Šæ—¥å¥½é‹ âœ¨</div>

<div class="grid-container">
    <div class="grid" id="grid"></div>
    <button class="reset-btn" onclick="reset()">é‡ç½®è¨ˆç•«</button>
</div>

<script>
    const quotes = [
        "ä½ å€¼å¾—æ“æœ‰æ‰€æœ‰ç¾å¥½çš„äº‹ç‰©ï¼ŒåŒ…æ‹¬é€™ç­†å­˜æ¬¾å¸¶ä¾†çš„è‡ªç”±ã€‚",
        "ä»Šå¤©çš„è‡ªå¾‹ï¼Œæ˜¯ç‚ºäº†æ˜å¤©èƒ½éš¨å¿ƒæ‰€æ¬²åœ°èªªã€å¥½ã€ã€‚",
        "å¹¸é‹å°æ’‡æ­¥ï¼šä»Šå¤©å°é¡å­è£¡çš„è‡ªå·±å¾®ç¬‘ï¼Œå¥½äº‹å³å°‡ç™¼ç”Ÿã€‚",
        "å°å°çš„ç¡¬å¹£æ˜¯å¤§å¤§çš„åº•æ°£ï¼Œä½ æ­£åœ¨è¦ªæ‰‹æ‰“é€ å®‰å…¨æ„Ÿã€‚",
        "å¹¸é‹å°æ’‡æ­¥ï¼šæ·±å‘¼å¸ä¸‰æ¬¡ï¼Œæ„Ÿå—é€™ä¸€åˆ»çš„å¯§éœèˆ‡è±ç›ˆã€‚",
        "æœªä¾†çš„ä½ ï¼Œä¸€å®šæœƒæ„Ÿè¬ç¾åœ¨é€™å€‹é–ƒé–ƒç™¼å…‰çš„è‡ªå·±ã€‚",
        "ä¿¡å¿ƒä¾†è‡ªæ–¼æŒæ§æ„Ÿï¼Œä½ æ­£åœ¨æŒæ§ä½ çš„æœªä¾†ã€‚",
        "å¹¸é‹å°æ’‡æ­¥ï¼šå–ä¸€æ¯æº«æ°´ï¼Œæ„Ÿè¬è‡ªå·±ä»Šå¤©çš„ä»˜å‡ºã€‚",
        "æ­å–œï¼ä½ é›¢å¤¢æƒ³æ¸…å–®åˆè¿‘äº†ä¸€æ­¥ã€‚"
    ];

    const milestones = {
        10: "å¤ªæ£’äº†ï¼10 å¤©çš„å …æŒå·²ç¶“è®“ç¿’æ…£æˆè‡ªç„¶ã€‚",
        50: "50 å¤©é”æˆï¼ä½ æ­£åœ¨å»ºç«‹ç©©å›ºçš„è²¡å¯Œåœ°åŸºã€‚",
        100: "ç™¾æ—¥æŒ‘æˆ°æˆåŠŸï¼ä½ çš„æ¯…åŠ›è®“äººä½©æœã€‚",
        200: "ä¸çŸ¥ä¸è¦ºèµ°äº†ä¸€å¤§åŠï¼æœªä¾†å¯æœŸã€‚",
        365: "ğŸ‰ å¥‡è¹Ÿé”æˆï¼ä½ æ˜¯æœ€æ£’çš„æŒ‘æˆ°è€…ï¼"
    };

    let amountPool = JSON.parse(localStorage.getItem('amountPool_mobile'));
    if (!amountPool) {
        amountPool = Array.from({length: 365}, () => Math.floor(Math.random() * (500 - 50 + 1)) + 50);
        localStorage.setItem('amountPool_mobile', JSON.stringify(amountPool));
    }

    let savedIndices = JSON.parse(localStorage.getItem('lucky_v_mobile_saved')) || [];

    function render() {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        let totalMoney = 0;

        amountPool.forEach((amt, index) => {
            const isSaved = savedIndices.includes(index);
            const cell = document.createElement('div');
            cell.className = `cell ${isSaved ? 'checked' : ''}`;
            cell.innerHTML = `
                <div class="day-num">${index + 1}</div>
                <div class="amount">$${amt}</div>
            `;
            if (isSaved) totalMoney += amt;
            cell.onclick = () => toggle(index);
            grid.appendChild(cell);
        });

        document.getElementById('total-money').innerText = `$${totalMoney.toLocaleString()}`;
        document.getElementById('total-days').innerText = savedIndices.length;
        document.getElementById('percent').innerText = `${((savedIndices.length/365)*100).toFixed(0)}%`;
    }

    function toggle(index) {
        const idxInSaved = savedIndices.indexOf(index);
        if (idxInSaved > -1) {
            savedIndices.splice(idxInSaved, 1);
        } else {
            savedIndices.push(index);
            checkMilestone(savedIndices.length);
            showQuote();
            // é»æ“Šéœ‡å‹•å›é¥‹ (éƒ¨åˆ†å®‰å“æ”¯æ´)
            if (window.navigator.vibrate) window.navigator.vibrate(20);
        }
        localStorage.setItem('lucky_v_mobile_saved', JSON.stringify(savedIndices));
        render();
    }

    function showQuote() {
        const q = quotes[Math.floor(Math.random() * quotes.length)];
        document.getElementById('quote-display').innerText = "âœ¨ " + q;
    }

    function checkMilestone(count) {
        if (milestones[count]) {
            confetti({ particleCount: 100, spread: 50, origin: { y: 0.8 } });
            document.getElementById('milestone-msg').innerText = milestones[count];
            document.getElementById('modal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }
    }

    function closeModal() {
        document.getElementById('modal').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
    }

    function reset() {
        if (confirm("ç¢ºå®šè¦é‡ç½®å—ï¼Ÿ")) {
            localStorage.clear();
            location.reload();
        }
    }

    render();
</script>

</body>
</html>


